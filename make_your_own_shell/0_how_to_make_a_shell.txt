If you're reading this, I assume you're interested in making a shell for FLUX and/or FLELE. Great!

If you're familiar with shell making already, this will be easy. And if you're not, I'll give you some basic pointers.

The thing about FLUX is that it allows you some extra customizability with a special system that lets you load in some YAYA code with your ghost. However, I recommend not making anything too complex with this system, and I'll talk more about that in a later section.


	——— Section 1: Shell making for beginners ———
First of all, there is a great guide on Ukadoc that will demonstrate how to make shells, with images. Read that. https://ukagakadreamteam.github.io/ukadoc/manual/dev_shell.html

All you need to have a basic FLUX shell is four images, and maybe some collisions set up. You can make it more detailed than that if you want, but that's the basic stuff you need.

FLUX attempts to maintain backwards compatibility with FLELE, and you should always keep in mind that the user is able to turn off any custom functionality you've added and have your shell be handled like a FLELE shell! So do make sure it looks ok even with just the basics.


	——— Section 2: Supported surfaces and collisions ———
The basic surfaces needed are:

surface0 - Default pose
surface1 - After being pet
surface6 - "Action", used when the user performs certain functions
surface25 - Singing

You can optionally include the following, which are specific to FLUX:

surface7 - "Error", used when an error occurs when the user is using a function
surface8 - "Refuse", used when an action cannot be completed for reasons other than an error

(If you omit these surfaces, surface6 will be used in their place.)


FLELE makes use of collisions/hot spots to control the music player, although it can be controlled via hotkeys as well. The strange thing about FLELE is that, unlike most ghosts, there *must* be a "menu" collision, or else the ghost's menu is inaccessible. This isn't an issue in FLUX, but it's important to keep in mind if you want your shells to be compatible with FLELE too.

These are all of the collisions that FLELE recognizes:

play_button - Starts a song if none is playing, or plays the next song
stop_button1 - Stops the current song
stop_button2 - Same as above (there isn't really a reason to use this one)
k_window - In FLELE, opens a bar that displays the name of the current song. In FLUX, opens the song menu.
menu - Opens the ghost's menu. In FLUX, any area that is *not* a collision will also open the menu. However, since FLELE doesn't do this, it is recommended to have a menu hotspot somewhere
clear_button - Clears the current playlist
minimize - Minimizes the ghost
end_sect - Closes the ghost
stroke_p - Pettable area of the ghost


In addition to these, FLUX recognizes the following collisions:

pause_resume_button - Pauses the song if one is playing, or resumes playing if it was already paused
next_button - Goes to the next song
previous_button - Goes to the previous song (depending on the user's settings, it may go back to the start of the song)
stop_after_current_button - Stops playing music after the current song ends
stop_after_playlist_button - Stops playing music after the current playlist ends
song_bar_button - Toggles SSP's built in song bar (mostly useful for scrubbing to different points in the track)
volume_up_button - Adjusts the volume setting up by 5
volume_down_button - Adjusts the volume setting down by 5
speed_up_button - Adjusts the speed setting up by 5
speed_down_button - Adjusts the speed setting down by 5
balance_left_button - Adjusts the balance setting left by 5
balance_right_button - Adjusts the balance setting right by 5

All collisions are optional! Although again, I highly recommend that you have the "menu" collision for compatibility with FLELE.

Most shells have the play and stop hotspots at the very least, as well as a pettable head. But otherwise, just add whichever ones you think you'd like to have.


	——— Section 3: Custom functionality with FLUX ———
Alright, here's where things get a bit spicy. I made FLUX back in early 2021, when I was only just starting to learn how to code more complicated things. This whole shell system with FLUX is one of those things that I consider an early mistake of mine, and I think this for a few reasons.

FLUX allows you to have a dic file in your shell that contains any YAYA code. This is a bad idea, and I should never have allowed it. However, the reason I did so is that at the time, people were creating FLELE shells and distributing modified versions of FLELE's 1.dic file, so that they could add custom dialogue to their shells. I wanted to make that easier, and I did.

The problem, really, is that I went a lot further than that. I allowed you to customize *anything*, and that means someone could easily make a malicious shell that damages your other installed shells, changes/wipes your settings in the ghost, etc.

The other problem is that this idea was misguided from the start. I thought of FLUX as being an easy way to get into ghost making, to be able to make something simple and quick, because making full ghosts was complicated and difficult. In my mind, FLUX was a sort of "ghost-lite" that would make things easier for beginners to get started.

But the truth? Ghosts don't have to be complicated. A ghost can be as simple as a FLUX shell, or even simpler. I had a way overcomplicated idea of what ghosts needed to be, and now that I've finally got my head on straight, I'm here to tell you that *if you want to add more than just some dialogue to your shell, you should be making a ghost!*

Want to make a simple little ghost with FLUX's music player attached? I've published the code for FLUX's music player separately, and it's free for you to add to your own ghost! Not only that, I've got an easy ghost template called Simplicity Template, and I created a special bundle of files to go with it that automatically integrates the music player for you.

Simplicity template: https://ukagaka.zichqec.com/template/simplicity_template
The music player bundle: https://github.com/Zichqec/music_player/releases/latest
(Download the one that says "Simplicity [version] bundle.zip - the other one is just the code on its own to be integrated manually)

I highly highly highly recommend that if you want to do ANYTHING complicated with your shell, that you just make it a ghost. This gives you several benefits such as:
- You don't have to wait 3+ years for me to add basic functionality that you want
- You're not beholden to me in any way
- You have full control of the whole ghost
- Your ghost will likely have wider reach than a shell for FLUX would

But, if I really can't convince you and you're dead set on making a shell for FLUX with complicated functionality, then please know this:
***I CONSIDER MOST OF FLUX'S CUSTOM FUNCTIONALITY TO BE DEPRECATED, AND PARTS OF IT MAY BE REMOVED OR LIMITED IN THE FUTURE.***
If you don't heed this warning, that's on you. It was a mistake for me to treat FLUX like a baseware, and I have given you the tools to move to something better. Please use them.


	——— Section 4: Ok I lied, this is the actual section about FLUX's custom functionality ———
	***DEPRECATED, some parts of this may be removed or limited in the future!***
	
Everything listed here is to be placed in a file called "dialogue.dic" within your shell's folder.

These are the custom functions that FLUX supports. You can add them to your shell if you want, or just leave them out, it doesn't matter.

These first few are more likely to stay:

OnCustom_RandomTalk - Random dialogue the shell can say
OnCustom_Petting - Custom dialogue pool for being pet

OnCustom_OnBoot - Booting FLUX
OnCustom_OnClose - Closing FLUX

OnCustom_trayicon - You can put a tray icon command here, like "\![set,tasktrayicon,../../shell/cibus/cibus_icon.ico]", to use your own tray icon with the ghost. Note that it is a relative path starting from the ghost/master/ folder, so it needs to start with "../../shell/(your_shell's_folder)/" to be in the right folder
shellver - The version number of your shell. You can write a version number here and have it displayed on the main menu, to help users know what version they have

OnCustom_IdleSurfaces - If you want more than one idle pose, you can list multiple here for it to pick from randomly
OnCustom_SingingSurfaces - If you want more than one singing pose, you can list multiple here for it to pick from randomly
OnCustom_ActionSurfaces - If you want more than one action pose for when the user performs an action in the right click menu, you can list multiple here for it to pick from randomly. Note, reference0 for this will be "Error" if the action was some kind of error, or "Refuse" if the action couldn't be completed, but it was something minor. You can ignore these if you aren't interested.

OnCustom_TestFunc - A dummy function to test stuff in. If you add this, and you turn on SHIORI debug mode in the dev palette, you'll see a button for this appear on FLUX's main menu


DEPRECATED:
OnCustom_MouseMoveSakura - Mouse move functions for the sakura, can be used for custom hotspots
OnCustom_MouseMoveExtra - Same as above but for other characters
OnCustom_MouseDoubleClickSakura - Custom double click functions for the sakura, can be used for custom hotspots
OnCustom_MouseDoubleClickExtra - Same as above but for other characters
OnCustom_Overlap - If the sakura and kero are overlapping
OnCustom_OverlapExtra - If characters besides the sakura and kero are overlapping, or if the sakura and kero stopped overlapping

OnCustom_OnVanished - When another ghost is uninstalled and FLUX is switched to, or if FLUX was running at the same time as a ghost that was uninstalled
OnCustom_NewYear - When the year rolls over
OnCustom_Menu - Allows you to add a custom button or two to the main menu. If you do more than that, you really ought to be making your own ghost

(These ones in particular, you should just route to OnCustom_OnBoot and OnCustom_OnClose)
OnCustom_OnGhostChanging - Changing to another ghost
OnCustom_OnGhostChanged - Changed from another ghost to FLUX
OnCustom_OnShellChanging - Changing to another shell
OnCustom_OnShellChanged - Changing from another shell to this one


Only add a function if you're planning to use it, anything else you should omit. If they exist but are blank, FLUX will still see them as existing and will output nothing, which would be strange.

Also, do not use \e in these. That can break various behaviors.


Another handy function to know about is the "Singing" function. You can use this as a quick check to see if a song is currently playing or not. It would look like this:

if Singing
{
	//Stuff while singing
}
else
{
	//Stuff while not singing
}


	——— Section 5: Misc ———
I've included a psd file with a thumbnail template in this folder. It comes with a couple of text options. You can use FLUX + FLELE if your shell is compatible with both, or just FLUX if you're not intending to keep compatibility with FLELE. Or do whatever you want, it isn't necessary to use.


	——— Section 6: Conclusion ———
And that's all I've got to say for now. I hope to at one point have a more in-depth guide for making shells generally, but between the Ukadoc guide, this, and referencing other existing shells, I think it'll be alright.

I know it seems a lot like I'm dicouraging you from making a shell here, and if you've got complicated plans in mind, then I am. Go make a ghost instead, I promise it's just as easy. If you're coding a FLUX shell, you *already know how to code a ghost.*

But if you just want to make a little guy that sings at you, and maybe you want to add a bit of dialogue, then sure, FLUX may be right for your project. I hope that you have fun making your shell!

If you have any questions or feedback for me, you can find me at https://ukagaka.zichqec.com/

If you release your shell publicly, tell me about it, and I'll list it on my website with the other FLUX shells! https://ukagaka.zichqec.com/ghost/flux

Also, we have a Discord server if you want to get development help: https://ukagakadreamteam.tumblr.com/discord

That's all, have fun ✨♫♪～